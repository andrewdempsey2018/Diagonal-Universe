{% extends 'base.html' %}

<!-- Required for django-embed-video -->
{% load embed_video_tags %}

<!-- use bootstrapform for rendering the comment form -->
{% load bootstrap %}

{% block post %}
<!-- Page Content -->
<div class="container">

    <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-8">

            <!-- Title -->
            <h1 class="mt-4">{{ latestPost.title }}</h1>

            <hr>

            <!-- Date/Time -->
            <p>{{ latestPost.date }}</p>

            <hr>

            <!-- Preview Image -->
            <img class="img-fluid rounded" src="{{ latestPost.topImage }}" alt="">

            <!-- Post Content -->
            {% if latestPost.subtitle != "No subtitle" %}
            <div class="subtitle">
                <p class="lead">{{ latestPost.subtitle }}</p>
            </div>
            {% endif %}

            <p>{{ latestPost.text1 | linebreaks }}</p>

            {% if latestPost.middleImage != "No image" %}
            <img class="img-fluid rounded" src="{{ latestPost.middleImage }}" alt="">

            <p class="text-muted">{{ latestPost.middleImageDescription }}</p>
            {% endif %}

            {% if latestPost.text2 != "No text" %}
            <p>{{ latestPost.text2 | linebreaks }}</p>
            {% endif %}

            <hr>

            <div title="Addition images section">

                <!-- <h3>Additional images</h3> -->

                {% if latestPost.extraImage1 != "No image" %}
                <img class="img-fluid rounded" src="{{ latestPost.extraImage1 }}"
                    alt="{{ latestPost.extraImage1Description }}">
                <p class="text-muted">{{ latestPost.extraImage1Description }}</p>
                <hr>
                {% endif %}

                {% if latestPost.extraImage2 != "No image" %}
                <img class="img-fluid rounded" src="{{ latestPost.extraImage2 }}"
                    alt="{{ latestPost.extraImage2Description }}">
                <p class="text-muted">{{ latestPost.extraImage2Description }}</p>

                <hr>
                {% endif %}

                {% if latestPost.extraImage3 != "No image" %}
                <img class="img-fluid rounded" src="{{ latestPost.extraImage3 }}"
                    alt="{{ latestPost.extraImage3Description }}">
                <p class="text-muted">{{ latestPost.extraImage3Description }}</p>

                <hr>
                {% endif %}
            </div>

            {% if latestPost.video != 'No video for this post' %}
            <div title="Video section">
                <h3>Video demonstration</h3>
                {% video latestPost.video 'small' %}
            </div>
            <hr>
            {% endif %}

            {% if latestPost.repo != 'No repo for this post' %}
            <div title="Repo section">
                <h3>Project repo</h3>
                <a href="{{ latestPost.repo }}">View the GitHub repo for "{{ latestPost.title }}"</a>
            </div>
            <hr>
            {% endif %}



            {% if latestPost.references != 'No references' %}
            <div class="references_section">
                <h3>Further reading</h3>

                <p>{{ latestPost.references | safe | linebreaks }}</p>


            </div>
            {% endif %}

            {% endblock %}

            {% block comments %}
            <!-- Comments Form -->
            <div class="card my-4">
                <h5 class="card-header">Leave a Comment:</h5>
                <div class="card-body">
                    <form action="" method="POST">
                        {% csrf_token %}
                        <div class="form-group">
                            {{form|bootstrap}}
                        </div>
                        <button type="submit" class="btn btn-primary" value="Comment">Submit</button>
                    </form>
                </div>
            </div>

            {% for comment in comments %}
            <!-- Single Comment -->
            <div class="card mb-4">
                <!-- <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt=""> -->
                <div class="media-body">
                    <h5 class="mt-0">{{ comment.name }} said:</h5>
                    {{ comment.text }}
                </div>
            </div>
            {% endfor %}

            {% endblock %}

        </div>
    </div>